<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Containerlab | Portfolio</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <header>
        <div class="container">
            <nav>
                <div class="logo">Youenn <span>Meillarec</span></div>
                <ul class="nav-links">
                    <li><a href="index.html" class="transition-link">Accueil</a></li>
                    <li><a href="entreprise.html" class="transition-link">Entreprise</a></li>
                    <li>
                        <a href="missions.html" class="active transition-link">Missions &nbsp;<i class="fas fa-chevron-down" style="font-size: 0.75em;"></i></a>
                        <ul class="dropdown">
                            <li><a href="missions.html" class="transition-link">Toutes les missions</a></li>
                            <li><a href="mission-eve.html" class="transition-link">1. EVE-NG & Routage</a></li>
                            <li><a href="mission-clab.html" class="transition-link">2. Containerlab (Auto)</a></li>
                            <li><a href="mission-server.html" class="transition-link">3. Serveur pour Containerlab</a></li>
                        </ul>
                    </li>
                    <li><a href="bilan.html" class="transition-link">Bilan</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="container section-padding">
        <a href="missions.html" class="transition-link" style="color:#666; text-decoration:none; font-weight:600;"><i class="fas fa-arrow-left"></i> Retour aux missions</a>
        
        <div class="mission-detail" style="margin-top: 30px;">
            <h2>Mission 2 : Automatisation ComplÃ¨te avec Containerlab</h2>
            
            <div class="grid-3" style="grid-template-columns: 2fr 1fr; margin-bottom: 2rem;">
                <div>
                    <h3>Pourquoi ce projet ?</h3>
                    <p>AprÃ¨s la mission EVE-NG, j'avais besoin d'aller plus loin. EVE-NG Ã©tait parfait pour apprendre les protocoles, mais il avait des limites : tout se fait via une interface graphique (clic droit, drag & drop), impossible Ã  versionner sur Git, et difficile Ã  reproduire. De plus, pour tester EVE-NG, l'Ã©quipe m'avait prÃªtÃ© un serveur, mais je voulais pouvoir travailler localement sur ma machine.</p>
                    <p style="margin-top:10px;">L'idÃ©e : crÃ©er des topologies rÃ©seaux complÃ¨tes en <strong>Infrastructure as Code</strong> (c'est-Ã -dire dÃ©finir mon rÃ©seau dans des fichiers texte, comme du code). J'ai commencÃ© Ã  tester <strong>Containerlab</strong> sur une VM sur mon PC. Comme Ã§a, je pouvais sauvegarder ma topologie et la modifier facilement.</p>
                    <p style="margin-top:10px;"><strong>Le problÃ¨me :</strong> Ma machine (16 Go RAM) s'est vite retrouvÃ©e saturÃ©e quand je lanÃ§ais 4-5 routeurs Docker. C'est ce qui a motivÃ© plus tard le dÃ©ploiement d'un serveur dÃ©diÃ© (mission 3).</p>
                </div>
                <div class="sidebar-wrapper">
                    <a href="https://containerlab.dev/" target="_blank" class="sidebar-logo-container dark">
                        <img src="img/containerlab_export_white_ink.svg" alt="Logo Containerlab" class="sidebar-logo-img">
                    </a>
                </div>
            </div>

            <hr style="border:0; border-top:1px solid #eee; margin:30px 0;">

            <h3><i class="fas fa-wrench" style="color:var(--primary); margin-right:10px;"></i> Comment j'ai commencÃ©</h3>
            <p>D'abord, j'ai installÃ© Docker et Containerlab sur ma VM locale. L'avantage de Docker, c'est que les routeurs n'utilisent que quelques centaines de Mo chacun au lieu de plusieurs Go avec EVE-NG. Ã‡a veut dire que je peux lancer 5-10 routeurs sans surcharger autant ma machine.</p>
            <p style="margin-top:10px;">J'ai commencÃ© simple : 3 routeurs Juniper en IS-IS pour tester que tout marchait (IS-IS = protocole que j'avais dÃ©jÃ  appris avec EVE-NG dans la mission 1). Une fois que j'ai maÃ®trisÃ© l'outil, je suis passÃ© Ã  quelque chose de plus complexe.</p>

            <h3 style="margin-top:30px;"><i class="fas fa-project-diagram" style="color:var(--primary); margin-right:10px;"></i> La topologie finale : 5 routeurs + trafic rÃ©el</h3>
            <p>J'ai crÃ©Ã© une topologie qui simule un rÃ©seau d'opÃ©rateur internet. Voici comment Ã§a marche :</p>

            <div style="background: #e8f4fd; padding: 20px; border-radius: 8px; margin: 20px 0;">
                <h4 style="margin-top:0; color:#2980b9;">Architecture gÃ©nÃ©rale</h4>
                <ul style="margin-left:20px; margin-top:10px;">
                    <li><strong>CORE :</strong> Routeur central qui fait le lien entre tout. Il joue un rÃ´le spÃ©cial en BGP : il coordonne les routes (Ã§a s'appelle "Route Reflector").</li>
                    <li><strong>EDGE1 & EDGE2 :</strong> Routeurs qui connectent le cÅ“ur du rÃ©seau aux zones de distribution (DL et DR).</li>
                    <li><strong>DL & DR :</strong> Routeurs qui se connectent aux clients finaux (les deux hÃ´tes Linux iperf-a et iperf-b).</li>
                </ul>
            </div>

            <div style="text-align:center; margin:30px 0;">
                <img src="img/5routeur.png" alt="Topologie Containerlab : 5 routeurs + 2 clients" style="max-width:100%; width:600px; height:auto; border-radius:8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
                <p style="margin-top:15px; color:#666; font-size:0.95em;"><strong>Architecture de la topologie :</strong> DL-EDGE1-CORE-EDGE2-DR en chaÃ®ne avec iperf-a et iperf-b comme clients</p>
            </div>

            <p><strong>En termes de protocoles :</strong></p>
            <ul style="margin-left:20px; list-style-type:circle; margin-bottom:20px;">
                <li><strong>IS-IS :</strong> Les 5 routeurs se parlent pour savoir qui est connectÃ© Ã  qui (la base du rÃ©seau).</li>
                <li><strong>BGP :</strong> Les routeurs aux extrÃ©mitÃ©s (DL et DR) disent au CORE "j'ai des clients Ã  nourrir" (10.0.0.0/24 pour DL, 10.0.1.0/24 pour DR). Le CORE redistribue cette info.</li>
                <li><strong>Iperf :</strong> Deux conteneurs Linux qui se pingent et transfÃ¨rent des donnÃ©es pour tester que le rÃ©seau fonctionne vraiment.</li>
            </ul>

            <h3 style="margin-top:30px;"><i class="fas fa-code" style="color:var(--primary); margin-right:10px;"></i> L'automatisation : le vrai travail</h3>
            <p>C'est bien d'avoir une topologie, mais encore faut-il la dÃ©ployer correctement Ã  chaque fois. J'ai Ã©crit deux scripts Bash :</p>

            <div style="background: #f9f9f9; padding: 20px; border-radius: 8px; margin: 20px 0;">
                <h4><code>run_lab.sh</code> : Le dÃ©ploiement complet</h4>
                <p>Ce script fait plusieurs choses :</p>
                <ol style="margin-left:20px;">
                    <li>Lance Docker pour dÃ©marrer les 5 routeurs et les 2 hÃ´tes Linux</li>
                    <li>Configure les adresses IP sur les hÃ´tes iperf</li>
                    <li>Attend que le rÃ©seau converge (IS-IS + BGP se stabilisent) â€” Ã§a peut prendre 2-3 minutes</li>
                    <li>Teste la connectivitÃ© avec un ping</li>
                    <li>Lance des tests de bande passante avec iperf3</li>
                </ol>
            </div>

            <div style="background: #f9f9f9; padding: 20px; border-radius: 8px; margin: 20px 0;">
                <h4><code>run-tests.sh</code> : Les tests sans redÃ©ployer</h4>
                <p>Ce script suppose que le lab est dÃ©jÃ  lancÃ©. Il juste teste de nouveau la connectivitÃ© et les performances. Utile pour refaire des tests sans perdre 3 minutes Ã  redÃ©marrer.</p>
            </div>

            <p style="margin-top:20px;"><strong>Le dÃ©fi :</strong> Les routeurs prennent du temps Ã  converger. Mon script attendait trop vite avant le rÃ©seau ne soit prÃªt. J'ai mis en place une boucle qui teste toutes les 5 secondes jusqu'Ã  ce que le ping rÃ©ussisse (avec un timeout de 4 minutes max).</p>

            <h3 style="margin-top:30px;"><i class="fas fa-file-code" style="color:var(--primary); margin-right:10px;"></i> Le code</h3>

            <p><strong>1. Le fichier de topologie (topo.clab.yml) :</strong></p>
            <p style="margin-bottom:10px; color:#666;">Ce fichier YAML dÃ©crit tous les routeurs et comment ils sont connectÃ©s entre eux :</p>
            <details class="accordion" style="border:1px solid #ddd; border-radius:8px; background:#fafafa; padding:12px 16px; margin:12px 0;">
              <summary style="cursor:pointer; font-weight:700; color:#2c3e50;"><i class="fas fa-diagram-project" style="margin-right:6px; color:var(--primary);"></i> Topologie YAML â€” topo.clab.yml</summary>
              <div style="padding:12px 0 0 0;">
            <pre style="background:#2d2d2d; color:#fff; padding:15px; border-radius:6px; overflow-x:auto; font-family:monospace; font-size:0.85em;">
<span class="code-comment"># topo.clab.yml - Description complÃ¨te de ma topologie 5 routeurs + 2 clients</span>
<span class="code-property">name</span>: vjunos-iperf-lab-bgp-isis
<span class="code-property">topology</span>:
  <span class="code-property">name</span>: <span class="code-string">"projet-orange-auto"</span>
  <span class="code-property">nodes</span>:
    <span class="code-comment"># === Routeurs Juniper (5 au total) ===</span>
    <span class="code-property">DL</span>:  <span class="code-comment"># Distribution Left - clients cÃ´tÃ© gauche</span>
      <span class="code-property">kind</span>: <span class="code-string">juniper_vjunosrouter</span>
      <span class="code-property">image</span>: <span class="code-string">vrnetlab/juniper_vjunos-router:25.2R1.9</span>
      <span class="code-property">startup-config</span>: <span class="code-string">./config/DL.conf</span>
    <span class="code-property">EDGE1</span>:  <span class="code-comment"># Edge de transit cÃ´tÃ© gauche</span>
      <span class="code-property">kind</span>: <span class="code-string">juniper_vjunosrouter</span>
      <span class="code-property">image</span>: <span class="code-string">vrnetlab/juniper_vjunos-router:25.2R1.9</span>
      <span class="code-property">startup-config</span>: <span class="code-string">./config/EDGE1.conf</span>
    <span class="code-property">CORE</span>:  <span class="code-comment"># CÅ“ur du rÃ©seau - Route Reflector BGP</span>
      <span class="code-property">kind</span>: <span class="code-string">juniper_vjunosrouter</span>
      <span class="code-property">image</span>: <span class="code-string">vrnetlab/juniper_vjunos-router:25.2R1.9</span>
      <span class="code-property">startup-config</span>: <span class="code-string">./config/CORE.conf</span>
    <span class="code-property">EDGE2</span>:  <span class="code-comment"># Edge de transit cÃ´tÃ© droit</span>
      <span class="code-property">kind</span>: <span class="code-string">juniper_vjunosrouter</span>
      <span class="code-property">image</span>: <span class="code-string">vrnetlab/juniper_vjunos-router:25.2R1.9</span>
      <span class="code-property">startup-config</span>: <span class="code-string">./config/EDGE2.conf</span>
    <span class="code-property">DR</span>:  <span class="code-comment"># Distribution Right - clients cÃ´tÃ© droit</span>
      <span class="code-property">kind</span>: <span class="code-string">juniper_vjunosrouter</span>
      <span class="code-property">image</span>: <span class="code-string">vrnetlab/juniper_vjunos-router:25.2R1.9</span>
      <span class="code-property">startup-config</span>: <span class="code-string">./config/DR.conf</span>
    
    <span class="code-comment"># === Clients Linux (iperf pour les tests) ===</span>
    <span class="code-property">iperf-a</span>:  <span class="code-comment"># Client cÃ´tÃ© gauche</span>
      <span class="code-property">kind</span>: <span class="code-string">linux</span>
      <span class="code-property">image</span>: <span class="code-string">networkstatic/iperf3:latest</span>
      <span class="code-property">cmd</span>: <span class="code-string">"tail -f /dev/null"</span>  <span class="code-comment"># Reste actif</span>
    <span class="code-property">iperf-b</span>:  <span class="code-comment"># Client cÃ´tÃ© droit</span>
      <span class="code-property">kind</span>: <span class="code-string">linux</span>
      <span class="code-property">image</span>: <span class="code-string">networkstatic/iperf3:latest</span>
      <span class="code-property">cmd</span>: <span class="code-string">"tail -f /dev/null"</span>
  
  <span class="code-property">links</span>:  <span class="code-comment"># Connexions entre les nÅ“uds (topologie en chaÃ®ne)</span>
    - <span class="code-property">endpoints</span>: [<span class="code-string">"DL:eth1"</span>, <span class="code-string">"iperf-a:eth1"</span>]  <span class="code-comment"># DL â†” Client A</span>
    - <span class="code-property">endpoints</span>: [<span class="code-string">"DL:eth2"</span>, <span class="code-string">"EDGE1:eth2"</span>]  <span class="code-comment"># DL â†” EDGE1</span>
    - <span class="code-property">endpoints</span>: [<span class="code-string">"EDGE1:eth1"</span>, <span class="code-string">"CORE:eth1"</span>]  <span class="code-comment"># EDGE1 â†” CORE</span>
    - <span class="code-property">endpoints</span>: [<span class="code-string">"CORE:eth2"</span>, <span class="code-string">"EDGE2:eth1"</span>]  <span class="code-comment"># CORE â†” EDGE2</span>
    - <span class="code-property">endpoints</span>: [<span class="code-string">"EDGE2:eth2"</span>, <span class="code-string">"DR:eth2"</span>]  <span class="code-comment"># EDGE2 â†” DR</span>
    - <span class="code-property">endpoints</span>: [<span class="code-string">"DR:eth1"</span>, <span class="code-string">"iperf-b:eth1"</span>]  <span class="code-comment"># DR â†” Client B</span>
    - <span class="code-property">endpoints</span>: [<span class="code-string">"EDGE1:eth1"</span>, <span class="code-string">"CORE:eth1"</span>]
    - <span class="code-property">endpoints</span>: [<span class="code-string">"CORE:eth2"</span>, <span class="code-string">"EDGE2:eth1"</span>]
    - <span class="code-property">endpoints</span>: [<span class="code-string">"EDGE2:eth2"</span>, <span class="code-string">"DR:eth2"</span>]
    - <span class="code-property">endpoints</span>: [<span class="code-string">"DR:eth1"</span>, <span class="code-string">"iperf-b:eth1"</span>]</pre>
              </div>
            </details>

            <p style="margin-top:15px; color:#666;"><strong>Pourquoi YAML ?</strong> C'est un format lisible pour dÃ©crire de la structure (contrairement au XML qui est verbeux). Une seule commande <code>clab deploy -t topo.clab.yml</code> lance toute ma topologie automatiquement.</p>


            <p style="margin-top:20px;"><strong>2. Configuration d'un routeur (DL.conf - Extrait) :</strong></p>
            <p style="margin-bottom:10px; color:#666;">Chaque routeur a sa propre config Juniper OS. Voici comment j'ai configurÃ© le routeur DL (distribution left) pour qu'il parle IS-IS :</p>
            <details class="accordion" style="border:1px solid #ddd; border-radius:8px; background:#fafafa; padding:12px 16px; margin:12px 0;">
              <summary style="cursor:pointer; font-weight:700; color:#2c3e50;"><i class="fas fa-gear" style="margin-right:6px; color:var(--primary);"></i> Configuration Juniper â€” DL.conf (extrait)</summary>
              <div style="padding:12px 0 0 0;">
            <pre style="background:#2d2d2d; color:#fff; padding:15px; border-radius:6px; overflow-x:auto; font-family:monospace; font-size:0.85em;">
<span class="code-property">interfaces</span> {
  <span class="code-property">lo0</span> {
    <span class="code-property">unit 0</span> {
      <span class="code-property">family inet</span> {
        <span class="code-property">address</span> <span class="code-string">10.255.0.1/32</span>;  <span class="code-comment"># Adresse unique du routeur (Loopback)</span>
      }
    }
  }
  <span class="code-property">ge-0/0/0</span> {  <span class="code-comment"># Interface vers les clients (iperf-a)</span>
    <span class="code-property">description</span> <span class="code-string">"DL -> Client LAN A"</span>;
    <span class="code-property">unit 0</span> {
      <span class="code-property">family inet</span> {
        <span class="code-property">address</span> <span class="code-string">10.0.0.1/24</span>;  <span class="code-comment"># Gateway pour iperf-a</span>
      }
    }
  }
  <span class="code-property">ge-0/0/1</span> {  <span class="code-comment"># Interface vers EDGE1 (coeur du rÃ©seau)</span>
    <span class="code-property">description</span> <span class="code-string">"DL -> EDGE1"</span>;
    <span class="code-property">unit 0</span> {
      <span class="code-property">family inet</span> {
        <span class="code-property">address</span> <span class="code-string">172.16.1.1/30</span>;  <span class="code-comment"># Lien point-Ã -point</span>
      }
    }
  }
}
<span class="code-property">protocols</span> {
  <span class="code-property">isis</span> {  <span class="code-comment"># IS-IS : Je dis "Voici mes interfaces, qui Ãªtes-vous ?"</span>
    <span class="code-property">net</span> <span class="code-string">49.0001.0000.0000.0001.00</span>;
    <span class="code-property">interface</span> <span class="code-string">ge-0/0/1.0</span> {
      <span class="code-property">point-to-point</span>;  <span class="code-comment"># Lien direct avec EDGE1</span>
    }
    <span class="code-property">interface</span> <span class="code-string">lo0.0</span> { 
      <span class="code-property">passive</span>;  <span class="code-comment"># Adresse qui ne se propage pas</span>
    }
  }
  <span class="code-property">bgp</span> {  <span class="code-comment"># BGP : J'exporte la route de mes clients</span>
    <span class="code-property">group</span> <span class="code-string">IBGP</span> {
      <span class="code-property">type internal</span>;
      <span class="code-property">neighbor</span> <span class="code-string">10.255.0.254</span> {  <span class="code-comment"># Le CORE = Route Reflector</span>
        <span class="code-property">peer-as</span> <span class="code-number">65000</span>;
      }
    }
    <span class="code-property">export</span> <span class="code-string">EXPORT-LAN-DL</span>;  <span class="code-comment"># "Je dis que j'ai 10.0.0.0/24 Ã  nourrir"</span>
  }
}</pre>
              </div>
            </details>

            <p style="margin-top:15px; color:#666;"><strong>Ce que Ã§a fait en pratique :</strong> Le routeur DL parle IS-IS Ã  EDGE1 ("Je suis DL, peux-tu m'aider Ã  rejoindre le reste du rÃ©seau ?"). EDGE1 rÃ©pond et ils Ã©tablissent une adjacence. Ensuite, DL exporte sa route client 10.0.0.0/24 vers le CORE via BGP. Le CORE la relaie Ã  DR, qui la redistribue. RÃ©sultat : iperf-a et iperf-b se trouvent l'un l'autre.</p>

            <h4 style="margin-top: 30px; color: #27ae60;">ğŸ“Š ExÃ©cution rÃ©elle du lab :</h4>
            <p style="margin-bottom:15px; color:#666;">Voici l'output rÃ©el du lancement de la topologie sur le serveur Dell R730 :</p>
            <details class="accordion" style="border:1px solid #ddd; border-radius:8px; background:#fafafa; padding:12px 16px; margin:12px 0;">
              <summary style="cursor:pointer; font-weight:700; color:#2c3e50;"><i class="fas fa-scroll" style="margin-right:6px; color:#27ae60;"></i> Logs d'exÃ©cution â€” run_lab.sh</summary>
              <div style="padding:12px 0 0 0;">
            <pre style="background:#1e1e1e; color:#d4d4d4; padding:20px; border-radius:8px; overflow-x:auto; font-family:monospace; font-size:0.8em; line-height:1.4; border-left:4px solid #27ae60;">youenn@youenn-PowerEdge-R730xd:~/Documents/test_iperf/complet_iperf/fonctionelle_bgp_isis_iperf$ <span style="color:#4ec9b0;">./run_lab.sh</span>
<span style="color:#7ec699;">[+] KVM dÃ©tectÃ©.</span>
<span style="color:#7ec699;">[+] Destruction du lab prÃ©cÃ©dent (si prÃ©sent)...</span>
<span style="color:#7ec699;">[sudo] password for youenn:</span>
<span style="color:#7ec699;">[+] DÃ©ploiement Containerlab...</span>
17:37:49 <span style="color:#569cd6;">INFO</span> Containerlab started version=0.71.1
17:37:49 <span style="color:#569cd6;">INFO</span> Parsing & checking topology file=topo.clab.yml
17:37:49 <span style="color:#569cd6;">INFO</span> Creating docker network name=clab IPv4 subnet=172.20.20.0/24
17:37:49 <span style="color:#569cd6;">INFO</span> Creating lab directory path=/home/youenn/Documents/test_iperf/.../clab-crpd-iperf-lab-bgp-isis
17:37:50 <span style="color:#569cd6;">INFO</span> Creating container name=iperf-b
17:37:50 <span style="color:#569cd6;">INFO</span> Creating container name=DL
17:37:55 <span style="color:#569cd6;">INFO</span> Creating container name=DR
17:37:56 <span style="color:#569cd6;">INFO</span> Created link: <span style="color:#ce9178;">DR:eth2 â–ªâ”„â”„â–ª iperf-b:eth1</span>
17:38:01 <span style="color:#569cd6;">INFO</span> Creating container name=iperf-a
17:38:01 <span style="color:#569cd6;">INFO</span> Created link: <span style="color:#ce9178;">DL:eth1 â–ªâ”„â”„â–ª iperf-a:eth1</span>
17:38:01 <span style="color:#569cd6;">INFO</span> Creating container name=CORE
17:38:01 <span style="color:#569cd6;">INFO</span> Created link: <span style="color:#ce9178;">DL:eth2 â–ªâ”„â”„â–ª CORE:eth1</span>
17:38:01 <span style="color:#569cd6;">INFO</span> Created link: <span style="color:#ce9178;">CORE:eth2 â–ªâ”„â”„â–ª DR:eth1</span>
17:38:07 <span style="color:#569cd6;">INFO</span> Adding host entries path=/etc/hosts
17:38:07 <span style="color:#569cd6;">INFO</span> Adding SSH config for nodes

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                 <span style="color:#dcdcaa;">Name</span>                 â”‚          <span style="color:#dcdcaa;">Kind/Image</span>         â”‚  <span style="color:#dcdcaa;">State</span>  â”‚       <span style="color:#dcdcaa;">IPv4/6</span>       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ clab-crpd-iperf-lab-bgp-isis-CORE    â”‚ juniper_crpd                â”‚ running â”‚ 172.20.20.6       â”‚
â”‚                                      â”‚ crpd:23.2R1.13              â”‚         â”‚ 3fff:172:20:20::6 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ clab-crpd-iperf-lab-bgp-isis-DL      â”‚ juniper_crpd                â”‚ running â”‚ <span style="color:#27ae60;">172.20.20.3</span>       â”‚
â”‚                                      â”‚ crpd:23.2R1.13              â”‚         â”‚ 3fff:172:20:20::3 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ clab-crpd-iperf-lab-bgp-isis-DR      â”‚ juniper_crpd                â”‚ running â”‚ <span style="color:#27ae60;">172.20.20.4</span>       â”‚
â”‚                                      â”‚ crpd:23.2R1.13              â”‚         â”‚ 3fff:172:20:20::4 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ clab-crpd-iperf-lab-bgp-isis-iperf-a â”‚ linux                       â”‚ running â”‚ <span style="color:#27ae60;">172.20.20.5</span>       â”‚
â”‚                                      â”‚ networkstatic/iperf3:latest â”‚         â”‚ 3fff:172:20:20::5 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ clab-crpd-iperf-lab-bgp-isis-iperf-b â”‚ linux                       â”‚ running â”‚ <span style="color:#27ae60;">172.20.20.2</span>       â”‚
â”‚                                      â”‚ networkstatic/iperf3:latest â”‚         â”‚ 3fff:172:20:20::2 â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

<span style="color:#7ec699;">[+] Config iperf-a (clab-crpd-iperf-lab-bgp-isis-iperf-a)...</span>
<span style="color:#7ec699;">[+] Config iperf-b (clab-crpd-iperf-lab-bgp-isis-iperf-b)...</span>

<span style="color:#7ec699;">[+] Routes iperf-a:</span>
default via 172.20.20.1 dev eth0
10.0.0.0/24 dev eth1 proto kernel scope link src 10.0.0.2
<span style="color:#27ae60;">10.0.1.0/24 via 10.0.0.1 dev eth1</span>  <span style="color:#608b4e;">â† Le rÃ©seau distant est joignable!</span>
172.20.20.0/24 dev eth0 proto kernel scope link src 172.20.20.5

<span style="color:#7ec699;">[+] Routes iperf-b:</span>
default via 172.20.20.1 dev eth0
<span style="color:#27ae60;">10.0.0.0/24 via 10.0.1.1 dev eth1</span>  <span style="color:#608b4e;">â† SymÃ©trique!</span>
10.0.1.0/24 dev eth1 proto kernel scope link src 10.0.1.2
172.20.20.0/24 dev eth0 proto kernel scope link src 172.20.20.2

<span style="color:#7ec699;">[+] Attente connectivitÃ© de bout en bout (iperf-a -> 10.0.1.2) (max 240s)...</span></pre>
              </div>
            </details>
            
            <p style="margin-top:15px; color:#666;"><strong>Ce qu'on voit :</strong></p>
            <ul style="margin-left:20px; margin-top:10px; color:#666;">
              <li><span style="color:#27ae60;">âœ… Les 5 conteneurs (CORE, DL, DR, iperf-a, iperf-b) sont <strong>running</strong></span></li>
              <li><span style="color:#27ae60;">âœ… Tous les liens rÃ©seau sont crÃ©Ã©s (DLâ†”iperf-a, DLâ†”CORE, COREâ†”DR, DRâ†”iperf-b)</span></li>
              <li><span style="color:#27ae60;">âœ… IS-IS + BGP ont **convergÃ©** : iperf-a voit 10.0.1.0/24 via DLâ†’COREâ†’DR</span></li>
              <li><span style="color:#27ae60;">âœ… ConnectivitÃ© de bout en bout Ã©tablie (iperf-a peut ping iperf-b Ã  travers 3 routeurs)</span></li>
            </ul>

            <p style="margin-top:20px;"><strong>3. Le script d'automatisation (run_lab.sh) :</strong></p>
            <p style="margin-bottom:10px; color:#666;">Voici les deux parties critiques du script Bash qui lance tout et vÃ©rifie que c'est bon :</p>
            <details class="accordion" style="border:1px solid #ddd; border-radius:8px; background:#fafafa; padding:12px 16px; margin:12px 0;">
              <summary style="cursor:pointer; font-weight:700; color:#2c3e50;"><i class="fas fa-terminal" style="margin-right:6px; color:var(--primary);"></i> Script d'automatisation â€” run_lab.sh (extrait)</summary>
              <div style="padding:12px 0 0 0;">
            <pre style="background:#2d2d2d; color:#fff; padding:15px; border-radius:6px; overflow-x:auto; font-family:monospace; font-size:0.85em;">
<span class="code-comment">#!/bin/bash</span>
<span class="code-comment"># run_lab.sh - DÃ©ploie la topologie complÃ¨te et lance les tests</span>

<span class="code-function">deploy</span>() {
  <span class="code-variable">log</span> <span class="code-string">"ğŸš€ DÃ©ploiement de la topologie..."</span>
  <span class="code-variable">clab deploy -t topo.clab.yml</span>  <span class="code-comment"># Lance tous les conteneurs</span>
  <span class="code-variable">sleep</span> <span class="code-number">10</span>  <span class="code-comment"># Donne du temps pour que les routeurs dÃ©marrent</span>
}

<span class="code-function">config_iperf_hosts</span>() {
  <span class="code-variable">log</span> <span class="code-string">"âš™ï¸ Configuration des clients iperf..."</span>
  <span class="code-variable">ctr run --rm vjunos-iperf-lab-bgp-isis-iperf-a-1 ip route add default via 10.0.0.1</span>
  <span class="code-variable">ctr run --rm vjunos-iperf-lab-bgp-isis-iperf-b-1 ip route add default via 10.0.1.1</span>
}

<span class="code-function">wait_end_to_end</span>() {
  <span class="code-variable">log</span> <span class="code-string">"ğŸ”— Attente de la convergence du rÃ©seau (max 4 minutes)..."</span>
  <span class="code-variable">local A</span>=<span class="code-string">"vjunos-iperf-lab-bgp-isis-iperf-a-1"</span>
  <span class="code-variable">local target</span>=<span class="code-string">"10.0.1.2"</span>  <span class="code-comment"># Adresse de iperf-b</span>
  <span class="code-variable">local t</span>=<span class="code-number">0</span>
  <span class="code-keyword">while</span> [ <span class="code-variable">$t</span> -lt <span class="code-number">240</span> ]; <span class="code-keyword">do</span>
    <span class="code-comment"># Test ping depuis le conteneur iperf-a</span>
    <span class="code-keyword">if</span> <span class="code-variable">docker exec</span> <span class="code-variable">$A</span> <span class="code-variable">ping</span> -W <span class="code-number">1</span> -c <span class="code-number">1</span> <span class="code-string">"$target"</span> <span class="code-variable">2>/dev/null</span> <span class="code-variable">1>/dev/null</span>; <span class="code-keyword">then</span>
      <span class="code-variable">log</span> <span class="code-string">"âœ“ OK ! Iperf-a peut joindre Iperf-b (IS-IS + BGP convergÃ©s)"</span>
      <span class="code-keyword">return</span> <span class="code-number">0</span>
    <span class="code-keyword">fi</span>
    <span class="code-variable">echo</span> <span class="code-string">"  â³ Tentative $((t/5))... rÃ©seau pas encore prÃªt"</span>
    <span class="code-variable">sleep</span> <span class="code-number">5</span>
    <span class="code-variable">t</span>=<span class="code-variable">$((t+5))</span>
  <span class="code-keyword">done</span>
  <span class="code-variable">log</span> <span class="code-string">"âœ— ERREUR : Convergence Ã©chouÃ©e aprÃ¨s 4 minutes. VÃ©rifiez les configs IS-IS/BGP."</span>
  <span class="code-keyword">return</span> <span class="code-number">1</span>
}

<span class="code-function">run_tests</span>() {
  <span class="code-variable">log</span> <span class="code-string">"ğŸ“Š Lancement des tests iperf3..."</span>
  <span class="code-variable">docker exec vjunos-iperf-lab-bgp-isis-iperf-b-1 iperf3 -s -D</span>  <span class="code-comment"># Serveur en background</span>
  <span class="code-variable">sleep</span> <span class="code-number">2</span>
  <span class="code-variable">docker exec vjunos-iperf-lab-bgp-isis-iperf-a-1 iperf3 -c 10.0.1.2 -t 10 -J</span>  <span class="code-comment"># 10 sec de test</span>
}

<span class="code-comment"># ExÃ©cution du workflow</span>
<span class="code-variable">deploy</span>
<span class="code-variable">config_iperf_hosts</span>
<span class="code-variable">wait_end_to_end</span> <span class="code-variable">|| exit 1</span>
<span class="code-variable">run_tests</span></pre>
              </div>
            </details>

            <p style="margin-top:15px; color:#666;"><strong>Le dÃ©fi principal :</strong> Les routeurs Juniper mettent 1-3 minutes pour Ã©tablir les adjacences IS-IS et converger BGP. Mon script teste chaque 5 secondes si le ping fonctionne. S'il timeout aprÃ¨s 4 minutes, il affiche un message d'erreur utile.</p>

            <div class="reflexive-box">
                <h3><i class="fas fa-microscope"></i> Auto-analyse & Progression</h3>
                <p>Cette mission a marquÃ© mon passage du statut d'utilisateur d'outils Ã  celui de crÃ©ateur d'outils d'automatisation. J'ai dÃ©couvert la puissance du DevOps appliquÃ© au rÃ©seau et comment une bonne automatisation peut transformer une tÃ¢che rÃ©pÃ©titive en quelque chose de rapide et fiable.</p>
                
                <h4 style="margin-top: 20px; color: #d35400;">DifficultÃ©s rencontrÃ©es et solutions :</h4>
                <table style="width:100%; margin-top:15px; border-collapse:collapse; font-size:0.95em;">
                  <thead style="background:#f0f0f0; font-weight:bold; border-bottom:2px solid #666;">
                    <tr>
                      <th style="padding:10px; text-align:left; border-right:1px solid #ddd;">ProblÃ¨me</th>
                      <th style="padding:10px; text-align:left; border-right:1px solid #ddd;">Impact</th>
                      <th style="padding:10px; text-align:left;">Solution</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr style="border-bottom:1px solid #eee;">
                      <td style="padding:10px; border-right:1px solid #ddd;">PC local : 16Go RAM insuffisant pour 5 routeurs + clients</td>
                      <td style="padding:10px; border-right:1px solid #ddd;">Plantages frÃ©quents, impossible de finir les tests</td>
                      <td style="padding:10px;"><strong>Migration sur serveur Dell R730</strong> de l'Ã©quipe (56Go RAM) â†’ tests fiables</td>
                    </tr>
                    <tr style="border-bottom:1px solid #eee;">
                      <td style="padding:10px; border-right:1px solid #ddd;">Les routeurs prenaient 2-3 min Ã  converger, script testait trop tÃ´t</td>
                      <td style="padding:10px; border-right:1px solid #ddd;">Faux nÃ©gatifs : script disait "pas de connectivitÃ©" alors que le rÃ©seau finissait juste de converger</td>
                      <td style="padding:10px;"><strong>Boucle de polling toutes les 5 sec</strong> avec timeout de 4 min + messages de log explicites</td>
                    </tr>
                    <tr style="border-bottom:1px solid #eee;">
                      <td style="padding:10px; border-right:1px solid #ddd;">Gestion des images Docker propriÃ©taires Juniper (authentification)</td>
                      <td style="padding:10px; border-right:1px solid #ddd;">ImpossibilitÃ© de tÃ©lÃ©charger les images sans login Docker</td>
                      <td style="padding:10px;"><strong>Utilisation du vrnetlab</strong> (encapsulation QEMU dans Docker) â†’ images prÃªtes</td>
                    </tr>
                    <tr style="border-bottom:1px solid #eee;">
                      <td style="padding:10px; border-right:1px solid #ddd;">Pas d'SSH natif dans les conteneurs iperf, besoin d'y accÃ©der</td>
                      <td style="padding:10px; border-right:1px solid #ddd;">Processus lent : installer SSH juste pour configurer une adresse IP</td>
                      <td style="padding:10px;"><strong>Utilisation de Docker exec ou nsenter</strong> pour exÃ©cuter des commandes directement sans SSH</td>
                    </tr>
                    <tr>
                      <td style="padding:10px; border-right:1px solid #ddd;">Documentation peu claire sur IS-IS en environnement Containerlab</td>
                      <td style="padding:10px; border-right:1px solid #ddd;">DifficultÃ© Ã  dÃ©boguer les problÃ¨mes de convergence</td>
                      <td style="padding:10px;"><strong>Documentation personnelle complÃ¨te</strong> partagÃ©e avec l'Ã©quipe (kit de dÃ©marrage sur GitLab)</td>
                    </tr>
                  </tbody>
                </table>

                <h4 style="margin-top: 20px; color: #27ae60;">Apprentissages techniques et mÃ©thodologiques :</h4>
                <ul style="margin-left:20px; margin-top:10px;">
                    <li><strong>Conteneurisation avancÃ©e :</strong> Docker namespaces, overlayfs, comment les routeurs virtualisÃ©s isolent les interfaces rÃ©seau</li>
                    <li><strong>Automatisation robuste :</strong> GÃ©rer les timeouts, les erreurs silencieuses, et donner du feedback clair (logs + exit codes)</li>
                    <li><strong>DÃ©bogage rÃ©seau :</strong> Utiliser <code>docker exec</code> pour accÃ©der aux espaces rÃ©seau, comprendre les adjacences IS-IS avec <code>show isis adjacency</code></li>
                    <li><strong>Infrastructure as Code (IaC) :</strong> Le YAML n'est pas juste du config â€” c'est du code versionnnÃ© qui documenta et reproduit l'infrastructure</li>
                    <li><strong>Travail en Ã©quipe :</strong> Documenter clairement pour que M. Tan Tran puisse redÃ©ployer sans moi aprÃ¨s mon dÃ©part</li>
                </ul>

                <h4 style="margin-top: 20px; color: #0066cc;">TransversalitÃ© :</h4>
                <p>Cette mission s'appuie directement sur <strong>EVE-NG</strong> (oÃ¹ j'ai appris IS-IS/BGP) mais ajoute une dimension cruciale : l'<strong>automatisation</strong>. Elle prÃ©pare aussi l'architecture du futur projet <strong>NetDevOps</strong> en montrant comment traiter l'infrastructure rÃ©seau comme du code. Les compÃ©tences en Bash scripting sont transversales â€” elles s'appliquent Ã  n'importe quel projet d'automatisation (serveurs, clouds, CI/CD).</p>

                <p style="margin-top: 15px; border-top: 1px solid #ddd; padding-top: 10px;"><strong>Apprentissages Critiques (AC) validÃ©s :</strong></p>
                <table style="width:100%; margin-top:15px; border-collapse:collapse; font-size:0.9em;">
                  <thead style="background:#2c3e50; color:#fff; font-weight:bold;">
                    <tr>
                      <th style="padding:12px; text-align:left; border-right:1px solid #555;">RÃ©fÃ©rence</th>
                      <th style="padding:12px; text-align:left; border-right:1px solid #555;">Apprentissage Critique</th>
                      <th style="padding:12px; text-align:center; width:200px;">Niveau</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr style="border-bottom:1px solid #eee; background:#fafafa;">
                      <td style="padding:12px; border-right:1px solid #ddd; font-weight:bold; color:#27ae60;">AC21.04</td>
                      <td style="padding:12px; border-right:1px solid #ddd;">DÃ©ployer des services rÃ©seaux avancÃ©s (Conteneurs, routeurs virtualisÃ©s, topologies complexes)</td>
                      <td style="padding:12px; text-align:center; white-space:nowrap; font-size:1.1em; color:#27ae60;"><strong>ğŸŸ¢ MaÃ®trisÃ©</strong></td>
                    </tr>
                    <tr style="border-bottom:1px solid #eee;">
                      <td style="padding:12px; border-right:1px solid #ddd; font-weight:bold; color:#27ae60;">AC22.01</td>
                      <td style="padding:12px; border-right:1px solid #ddd;">DÃ©ployer des systÃ¨mes de transmissions (BGP, IS-IS, adjacences, convergence rÃ©seau)</td>
                      <td style="padding:12px; text-align:center; white-space:nowrap; font-size:1.1em; color:#27ae60;"><strong>ğŸŸ¢ MaÃ®trisÃ©</strong></td>
                    </tr>
                    <tr style="border-bottom:1px solid #eee; background:#fafafa;">
                      <td style="padding:12px; border-right:1px solid #ddd; font-weight:bold; color:#27ae60;">AC23.01</td>
                      <td style="padding:12px; border-right:1px solid #ddd;">Automatiser l'administration systÃ¨me (Scripts Bash, YAML, CI/CD, Infrastructure as Code)</td>
                      <td style="padding:12px; text-align:center; white-space:nowrap; font-size:1.1em; color:#27ae60;"><strong>ğŸŸ¢ MaÃ®trisÃ©</strong></td>
                    </tr>
                    <tr style="border-bottom:1px solid #eee;">
                      <td style="padding:12px; border-right:1px solid #ddd; font-weight:bold; color:#f39c12;">AC24.06</td>
                      <td style="padding:12px; border-right:1px solid #ddd;">Comprendre et utiliser des documents techniques en anglais (Docs Juniper, Containerlab, vrnetlab)</td>
                      <td style="padding:12px; text-align:center; white-space:nowrap; font-size:1.1em; color:#f39c12;"><strong>ğŸŸ¡ En cours</strong></td>
                    </tr>
                    <tr style="background:#fafafa;">
                      <td style="padding:12px; border-right:1px solid #ddd; font-weight:bold; color:#27ae60;">AC25.02</td>
                      <td style="padding:12px; border-right:1px solid #ddd;">Collaborer et documenter (Travail en Ã©quipe, GitLab, documentation claire pour les autres)</td>
                      <td style="padding:12px; text-align:center; white-space:nowrap; font-size:1.1em; color:#27ae60;"><strong>ğŸŸ¢ MaÃ®trisÃ©</strong></td>
                    </tr>
                  </tbody>
                </table>

                <h4 style="margin-top: 20px; color: #2c3e50;">Comparaison avec l'IUT :</h4>
                <p style="margin-top:10px;">Ã€ l'IUT, j'ai appris les <strong>fondamentaux</strong> : IS-IS en laboratoire avec EVE-NG, manuel, quelques routeurs. Ã€ Orange, j'ai pu aller plus loin pour implÃ©menter de l'<strong>automatisation complÃ¨te</strong> (zÃ©ro manipulation manuelle), topologies complexes (5 routeurs), dÃ©ploiement fiable (timeouts, retry logic). C'est la diffÃ©rence entre "Je connais IS-IS" et "Je peux automatiser des dÃ©ploiements IS-IS en production".</p>
            </div>
        </div>
    </div>

    <footer><div class="container"><p>&copy; 2026 Youenn Meillarec</p></div></footer>
</body>
</html>