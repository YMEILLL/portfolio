<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Containerlab | Portfolio</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <header>
        <div class="container">
            <nav>
                <div class="logo">Youenn <span>Meillarec</span></div>
                <ul class="nav-links">
                    <li><a href="index.html" class="transition-link">Accueil</a></li>
                    <li><a href="entreprise.html" class="transition-link">Entreprise</a></li>
                    <li>
                        <a href="missions.html" class="active transition-link">Missions <i class="fas fa-caret-down"></i></a>
                        <ul class="dropdown">
                            <li><a href="missions.html" class="transition-link">Toutes les missions</a></li>
                            <li><a href="mission-eve.html" class="transition-link">1. EVE-NG & Routage</a></li>
                            <li><a href="mission-server.html" class="transition-link">2. Serveur & Système</a></li>
                            <li><a href="mission-clab.html" class="transition-link">3. Containerlab (Auto)</a></li>
                        </ul>
                    </li>
                    <li><a href="bilan.html" class="transition-link">Bilan</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="container section-padding">
        <a href="missions.html" class="transition-link" style="color:#666; text-decoration:none; font-weight:600;"><i class="fas fa-arrow-left"></i> Retour aux missions</a>
        
        <div class="mission-detail" style="margin-top: 30px;">
            <h2>Mission 3 : Automatisation Complète avec Containerlab</h2>
            
            <div class="grid-3" style="grid-template-columns: 2fr 1fr; margin-bottom: 2rem;">
                <div>
                    <h3><i class="fas fa-cogs" style="color:var(--primary)"></i> L'objectif Final</h3>
                    <p>Avec le serveur Dell (Mission 2) opérationnel, j'ai pu déployer <strong>Containerlab</strong>. Contrairement à EVE-NG (Mission 1), ici tout est défini par du <strong>code</strong>. Cela permet d'automatiser le cycle de vie complet du test réseau.</p>
                    <p><strong>Mon workflow automatisé :</strong></p>
                    <ol style="margin-left:20px;">
                        <li><strong>Build :</strong> Construction de la topologie via un fichier YAML.</li>
                        <li><strong>Test :</strong> Vérification automatique de la connectivité via script Bash.</li>
                        <li><strong>Destroy :</strong> Nettoyage propre de l'environnement.</li>
                    </ol>
                </div>
                <div class="sidebar-wrapper">
                    <a href="https://containerlab.dev/" target="_blank" class="sidebar-logo-container dark">
                        <img src="img/containerlab_export_white_ink.svg" alt="Logo Containerlab" class="sidebar-logo-img">
                    </a>
                </div>
            </div>

            <hr style="border:0; border-top:1px solid #eee; margin:30px 0;">

            <h3>Étape 1 : Infrastructure as Code (Le Fichier YAML)</h3>
            <p>Au lieu de dessiner les routeurs à la souris, je les déclare dans un fichier texte. C'est la preuve de la transition vers le modèle <strong>DevOps</strong>. J'ai défini une topologie complexe type "Fournisseur d'Accès" avec un cœur de réseau et des clients simulés.</p>
            
            <p><em>Preuve : Extrait de mon fichier de topologie réel :</em></p>
            <pre>
<span class="code-comment"># Fichier : topo.clab.yml</span>
<span class="code-property">topology</span>:
  <span class="code-property">name</span>: <span class="code-string">"projet-orange-auto"</span>
  <span class="code-property">nodes</span>:
    <span class="code-comment"># Déclaration des routeurs Juniper virtuels</span>
    <span class="code-property">CORE</span>: { <span class="code-property">kind</span>: <span class="code-string">juniper_vjunosrouter</span>, <span class="code-property">image</span>: <span class="code-string">vrnetlab/juniper_vjunos...</span> }
    <span class="code-property">EDGE1</span>: { <span class="code-property">kind</span>: <span class="code-string">juniper_vjunosrouter</span>, <span class="code-property">image</span>: <span class="code-string">vrnetlab/juniper_vjunos...</span> }
    
    <span class="code-comment"># Clients Linux pour générer du trafic (Iperf)</span>
    <span class="code-property">iperf-a</span>: { <span class="code-property">kind</span>: <span class="code-string">linux</span>, <span class="code-property">image</span>: <span class="code-string">networkstatic/iperf3:latest</span> }
  
  <span class="code-property">links</span>:
    <span class="code-comment"># Câblage virtuel automatique</span>
    - <span class="code-property">endpoints</span>: [<span class="code-string">"DL:eth2"</span>, <span class="code-string">"CORE:eth1"</span>]
    - <span class="code-property">endpoints</span>: [<span class="code-string">"CORE:eth2"</span>, <span class="code-string">"DR:eth1"</span>]</pre>

            <h3 style="margin-top:30px;">Étape 2 : Le Script de Test Automatisé (Bash)</h3>
            <p>Une fois la topologie lancée, il faut vérifier qu'elle marche. Manuellement, cela prendrait 20 minutes (se connecter à chaque routeur, faire des pings...).</p>
            <p>J'ai développé un script Bash qui attend que le réseau converge (que les protocoles IS-IS et BGP s'établissent) puis lance des tests de connectivité tout seul.</p>

            <p><em>Preuve : Mon algorithme de vérification :</em></p>
            <pre>
<span class="code-comment"># Fichier : run_lab.sh (Extrait de la fonction de test)</span>
<span class="code-function">wait_end_to_end</span>(){
  <span class="code-variable">log</span> <span class="code-string">"Début des tests de connectivité..."</span>
  
  <span class="code-comment"># Boucle tant que le ping échoue (timeout défini)</span>
  <span class="code-keyword">while</span> [ <span class="code-variable">$t</span> -lt <span class="code-variable">$WAIT_E2E_SECS</span> ]; <span class="code-keyword">do</span>
    
    <span class="code-comment"># Commande nsenter pour exécuter un ping DEPUIS le conteneur client</span>
    <span class="code-keyword">if</span> <span class="code-variable">sudo nsenter</span> -t <span class="code-string">"$(pid "</span><span class="code-variable">$A</span><span class="code-string">")"</span> -n <span class="code-variable">ping</span> -W <span class="code-number">1</span> -c <span class="code-number">1</span> <span class="code-string">"$target"</span>; <span class="code-keyword">then</span>
      <span class="code-variable">log</span> <span class="code-string">"SUCCESS : Connectivité Client A <-> Client B validée !"</span>
      <span class="code-keyword">return</span> <span class="code-number">0</span>
    <span class="code-keyword">fi</span>
    <span class="code-variable">sleep</span> <span class="code-number">5</span>
  <span class="code-keyword">done</span>
  
  <span class="code-variable">log</span> <span class="code-string">"FAILURE : Le réseau n'a pas convergé à temps."</span>
  <span class="code-keyword">exit</span> <span class="code-number">1</span>
}</pre>

            <div class="reflexive-box">
                <h3><i class="fas fa-trophy" style="color:#f1c40f;"></i> Bilan Final & Progression</h3>
                <p>Cette mission est la synthèse de mon alternance. Je suis parti d'une manipulation manuelle (EVE-NG), j'ai identifié un blocage technique (RAM), j'ai mis en place l'infrastructure (Serveur Dell) et j'ai abouti à une solution industrielle automatisée.</p>
                <p><strong>Résultat pour l'équipe :</strong> Le temps de validation d'une nouvelle architecture est passé de <strong>plusieurs heures (manuel)</strong> à <strong>quelques minutes (automatique)</strong>.</p>
                
                <p style="margin-top: 15px; border-top: 1px solid #ddd; padding-top: 10px;"><strong>Apprentissages Critiques (AC) validés :</strong></p>
                <ul style="margin-left: 20px; font-weight: 600;">
                    <li>AC23.01 : Automatisation système (Bash/YAML).</li>
                    <li>AC21.04 : Virtualisation de fonctions réseaux (NFV).</li>
                    <li>AC22.01 : Déploiement d'architectures complexes.</li>
                </ul>
            </div>
        </div>
    </div>

    <footer><div class="container"><p>&copy; 2026 Youenn Meillarec</p></div></footer>
</body>
</html>