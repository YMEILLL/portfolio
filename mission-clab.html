<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Containerlab | Portfolio</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <header>
        <div class="container">
            <nav>
                <div class="logo">Youenn<span>Meillarec</span></div>
                <ul class="nav-links">
                    <li><a href="index.html" class="transition-link">Accueil</a></li>
                    <li><a href="entreprise.html" class="transition-link">Entreprise</a></li>
                    <li>
                        <a href="missions.html" class="active transition-link">Missions <i class="fas fa-caret-down" style="font-size: 0.8em;"></i></a>
                        <ul class="dropdown">
                            <li><a href="missions.html" class="transition-link">Toutes les missions</a></li>
                            <li><a href="mission-eve.html" class="transition-link">1. EVE-NG & Routage</a></li>
                            <li><a href="mission-server.html" class="transition-link">2. Serveur & Système</a></li>
                            <li><a href="mission-clab.html" class="transition-link">3. Containerlab (Auto)</a></li>
                        </ul>
                    </li>
                    <li><a href="bilan.html" class="transition-link">Bilan</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="container section-padding">
        <a href="missions.html" class="transition-link" style="color:#666; text-decoration:none; font-weight:600;"><i class="fas fa-arrow-left"></i> Retour aux missions</a>
        <div class="mission-detail" style="margin-top: 30px;">
            <h2>Automatisation d'Infrastructure avec Containerlab</h2>
            
            <div class="grid-3" style="grid-template-columns: 2fr 1fr; margin-bottom: 2rem;">
                <div>
                    <h3>Contexte & Objectifs</h3>
                    <p><strong>Contexte :</strong> EVE-NG montrait ses limites pour les tests à grande échelle (trop lourd, pas d'automatisation CI/CD). [cite_start]Mon poste de travail (16 Go RAM) ne suffisait plus pour faire tourner les simulations réseaux complexes [cite: 265-266].</p>
                    <p><strong>Objectif :</strong> Migrer vers une solution "Infrastructure as Code" (IaC) utilisant des conteneurs Docker légers pour simuler des architectures complexes sur un serveur dédié.</p>
                </div>
                <div class="sidebar-wrapper">
                    <a href="https://containerlab.dev/" target="_blank" class="sidebar-logo-container dark" title="Site officiel Containerlab">
                        <img src="img/containerlab_export_white_ink.svg" alt="Logo Containerlab" class="sidebar-logo-img">
                    </a>
                </div>
            </div>

            <hr style="border:0; border-top:1px solid #eee; margin:30px 0;">

            <h3>Phase 1 : Optimisation & Prise en main</h3>
            <p>J'ai débuté par l'installation de Docker et Containerlab sur un serveur Ubuntu dédié. Pour optimiser la RAM, j'ai sélectionné des images conteneurisées (Juniper cRPD / vJunos) qui ne consomment qu'une fraction des ressources d'une VM classique.</p>
            <p style="margin-top: 10px;">J'ai d'abord réalisé une topologie simple de <strong>3 routeurs</strong> pour valider le fonctionnement du protocole IS-IS et la connectivité de base.</p>
            
            <h3 style="margin-top: 30px;">Phase 2 : Architecture Complexe (BGP/IS-IS)</h3>
            <p>Une fois l'outil maîtrisé, j'ai conçu une topologie plus ambitieuse à <strong>5 routeurs</strong> simulant un réseau de fournisseur d'accès internet (FAI) complet :</p>
            <ul style="margin-left: 20px; list-style-type: circle; margin-bottom: 20px;">
                <li><strong>Architecture :</strong> Un routeur central (CORE) agissant comme Route Reflector, deux routeurs de transit (EDGE1, EDGE2) et deux routeurs de distribution (DL, DR).</li>
                <li><strong>Protocole IGP (IS-IS) :</strong> Pour assurer la connectivité interne entre les routeurs (Underlay).</li>
                <li><strong>Protocole EGP (iBGP) :</strong> Pour échanger les routes clients entre les extrémités du réseau (Overlay).</li>
                <li><strong>Clients simulés :</strong> Deux conteneurs Linux (iperf-a et iperf-b) pour générer du trafic réel.</li>
            </ul>

            <h3 style="margin-top:30px;">Phase 3 : Validation Automatisée (Scripting)</h3>
            <p>L'innovation majeure a été le développement d'un script Bash (<code>run_lab.sh</code>) pour automatiser entièrement la chaîne de validation :</p>
            <div style="background: #f4f6f8; padding: 15px; border-left: 4px solid var(--primary); margin: 15px 0;">
                <strong>Workflow du script :</strong> Déploiement du lab ➔ Configuration des IP des hôtes ➔ Attente de la convergence BGP ➔ Lancement des tests de ping et de bande passante (Iperf) ➔ Rapport.
            </div>

            <h3 style="margin-top:30px;">Preuves / Traces</h3>
            
            <p><strong>1. Définition de la Topologie (YAML) :</strong></p>
            <pre>
<span class="code-comment"># Extrait de topo.clab.yml</span>
<span class="code-property">topology</span>:
  <span class="code-property">nodes</span>:
    <span class="code-property">CORE</span>: { <span class="code-property">kind</span>: <span class="code-string">juniper_vjunosrouter</span>, <span class="code-property">image</span>: <span class="code-string">vrnetlab/juniper_vjunos...</span> }
    <span class="code-property">EDGE1</span>: { <span class="code-property">kind</span>: <span class="code-string">juniper_vjunosrouter</span>, <span class="code-property">image</span>: <span class="code-string">vrnetlab/juniper_vjunos...</span> }
    <span class="code-property">iperf-a</span>: { <span class="code-property">kind</span>: <span class="code-string">linux</span>, <span class="code-property">image</span>: <span class="code-string">networkstatic/iperf3:latest</span> }
  <span class="code-property">links</span>:
    - <span class="code-property">endpoints</span>: [<span class="code-string">"DL:eth2"</span>, <span class="code-string">"CORE:eth1"</span>] <span class="code-comment"># Liaison P2P</span>
    - <span class="code-property">endpoints</span>: [<span class="code-string">"CORE:eth2"</span>, <span class="code-string">"DR:eth1"</span>]</pre>

            <p><strong>2. Script d'Automatisation (Bash) :</strong></p>
            <pre>
<span class="code-comment"># Extrait de run_lab.sh</span>
<span class="code-function">wait_end_to_end</span>(){
  <span class="code-variable">log</span> <span class="code-string">"Attente connectivité de bout en bout..."</span>
  <span class="code-keyword">while</span> [ <span class="code-variable">$t</span> -lt <span class="code-variable">$WAIT_E2E_SECS</span> ]; <span class="code-keyword">do</span>
    <span class="code-comment"># Test Ping depuis le namespace du conteneur</span>
    <span class="code-keyword">if</span> <span class="code-variable">sudo nsenter</span> -t <span class="code-string">"$(pid "</span><span class="code-variable">$A</span><span class="code-string">")"</span> -n <span class="code-variable">ping</span> -W <span class="code-number">1</span> -c <span class="code-number">1</span> <span class="code-string">"$target"</span>; <span class="code-keyword">then</span>
      <span class="code-variable">log</span> <span class="code-string">"Connectivité OK (ISIS + iBGP convergés)."</span>
      <span class="code-keyword">return</span> <span class="code-number">0</span>
    <span class="code-keyword">fi</span>
    <span class="code-variable">sleep</span> <span class="code-number">5</span>
  <span class="code-keyword">done</span>
}</pre>

            <div class="reflexive-box">
                <h3><i class="fas fa-microscope"></i> Auto-analyse & Progression</h3>
                <p>Cette mission a marqué mon passage du statut d'utilisateur d'outils à celui de créateur d'outils d'automatisation. J'ai découvert la puissance du DevOps appliqué au réseau.</p>
                
                <h4 style="margin-top: 15px; color: #d35400;">Difficultés surmontées :</h4>
                <p>Au début, je me heurtais à des plantages fréquents sur mon PC local (16Go RAM) et à la complexité de gérer des images Docker propriétaires. De plus, la gestion des temps de convergence dans les scripts (le script testait trop tôt avant que le réseau ne soit prêt) a nécessité la mise en place de boucles de vérification (polling).</p>

                <h4 style="margin-top: 15px; color: #27ae60;">Solutions apportées :</h4>
                <p>J'ai migré vers un serveur dédié (Dell R730) pour lever les verrous matériels. J'ai intégré des namespaces Linux (`nsenter`) pour piloter les conteneurs clients sans avoir besoin d'y installer SSH. J'ai structuré mon travail sur GitLab avec un guide "Kit de démarrage" pour l'équipe.</p>

                <p style="margin-top: 15px; border-top: 1px solid #ddd; padding-top: 10px;"><strong>Apprentissages Critiques (AC) validés :</strong></p>
                <ul style="margin-left: 20px; font-weight: 600;">
                    <li>AC23.01 : Automatiser l’administration système (Bash/YAML).</li>
                    <li>AC22.01 : Déployer des systèmes de transmissions complexes (Architecture BGP).</li>
                    <li>AC21.04 : Déployer des services réseaux avancés (Conteneurisation).</li>
                    <li>AC24.06 : Comprendre des documents techniques en anglais.</li>
                </ul>
            </div>
        </div>
    </div>

    <footer><div class="container"><p>&copy; 2026 Youenn Meillarec</p></div></footer>
    <script>
        document.querySelectorAll('.transition-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                let target = this.href;
                document.body.classList.add('fade-out');
                setTimeout(() => window.location.href = target, 500);
            });
        });
    </script>
</body>
</html>